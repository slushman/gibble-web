---
interface Props {
  allergen: string;
  class?: string;
}

const { allergen, class: className = "w-5 h-5" } = Astro.props;

// Normalize allergen name for matching
const normalizedAllergen = allergen.toLowerCase();

// Emoji mapping for different allergens and dietary preferences
const getEmoji = (allergen: string) => {
  // Gluten / Wheat
  if (allergen.includes('gluten') || allergen.includes('wheat')) {
    return 'ğŸŒ¾';
  }

  // Dairy
  if (allergen.includes('dairy')) {
    return 'ğŸ¥›';
  }

  // Vegan
  if (allergen.includes('vegan')) {
    return 'ğŸŒ±';
  }

  // Vegetarian
  if (allergen.includes('vegetarian')) {
    return 'ğŸ¥¬';
  }

  // Coconut (check before nut to avoid matching "nut" in "coconut")
  if (allergen.includes('coconut')) {
    return 'ğŸ¥¥';
  }

  // Nut / Tree Nut / Peanut
  if (allergen.includes('nut') || allergen.includes('peanut')) {
    return 'ğŸ¥œ';
  }

  // Soy
  if (allergen.includes('soy')) {
    return 'ğŸ«˜';
  }

  // Egg
  if (allergen.includes('egg')) {
    return 'ğŸ¥š';
  }

  // Shellfish
  if (allergen.includes('shellfish')) {
    return 'ğŸ¦';
  }

  // Corn
  if (allergen.includes('corn')) {
    return 'ğŸŒ½';
  }

  // Sugar
  if (allergen.includes('sugar')) {
    return 'ğŸ§Š';
  }

  // Preservative
  if (allergen.includes('preservative')) {
    return 'ğŸ§ª';
  }

  // Yeast
  if (allergen.includes('yeast')) {
    return 'ğŸ¦ ';
  }

  // Legume
  if (allergen.includes('legume')) {
    return 'ğŸ«›';
  }

  // Potato
  if (allergen.includes('potato')) {
    return 'ğŸ¥”';
  }

  // Keto
  if (allergen.includes('keto')) {
    return 'âš¡';
  }

  // Paleo
  if (allergen.includes('paleo')) {
    return 'ğŸ–';
  }

  // Whole30
  if (allergen.includes('whole') || allergen.includes('30')) {
    return 'âœ…';
  }

  // Kosher
  if (allergen.includes('kosher')) {
    return 'âœ¡ï¸';
  }

  // Halal
  if (allergen.includes('halal')) {
    return 'â˜ªï¸';
  }

  // Pescatarian
  if (allergen.includes('pescatarian')) {
    return 'ğŸŸ';
  }

  // Default
  return 'âœ¨';
};

const emoji = getEmoji(normalizedAllergen);
---

<span class={className} style="display: inline-flex; align-items: center; justify-content: center; font-size: 1.25em;">
  {emoji}
</span>